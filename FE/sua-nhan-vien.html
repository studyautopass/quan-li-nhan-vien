<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thêm mới nhân viên</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Thêm mới nhân viên</h1>
      <form id="editEmployeeForm">
        <div class="form-group">
          <label for="employeeId">Mã nhân viên</label>
          <input
            type="text"
            id="employeeId"
            placeholder="Mã nhân viên"
            required
          />
        </div>
        <div class="form-group">
          <label for="employeeName">Tên nhân viên</label>
          <input
            type="text"
            id="employeeName"
            placeholder="Tên nhân viên"
            required
          />
        </div>
        <div class="form-group">
          <label for="birthDate">Ngày sinh</label>
          <input type="date" id="birthDate" placeholder="Ngày sinh" required />
        </div>
        <div class="form-group">
          <label for="gender">Giới tính</label>
          <select id="gender" required>
            <option value="">Chọn giới tính</option>
            <option value="Nam">Nam</option>
            <option value="Nữ">Nữ</option>
          </select>
        </div>
        <div class="form-group">
          <label for="address">Địa chỉ</label>
          <input type="text" id="address" placeholder="Địa chỉ" required />
        </div>
        <div class="form-group">
          <label for="phone">Số điện thoại</label>
          <input type="text" id="phone" placeholder="Số điện thoại" required />
        </div>
        <div class="form-group">
          <label for="departmentId">Mã phòng</label>
          <input
            type="text"
            id="departmentId"
            placeholder="Mã phòng"
            required
          />
        </div>
        <button
          type="submit"
          class="btn-green"
          onclick="'quan-ly-nhan-vien.html'"
        >
          Sửa
        </button>
      </form>
    </div>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const index = urlParams.get("index");

      // Lấy danh sách nhân viên từ localStorage
      let employees = JSON.parse(localStorage.getItem("employees")) || [];

      // Lấy thông tin nhân viên cần chỉnh sửa
      const employee = employees[index];
      console.log(`employee:: `, employee);
      // Gán dữ liệu vào form
      document.getElementById("employeeId").value = employee.employeeId;
      document.getElementById("employeeName").value = employee.employeeName;
      document.getElementById("birthDate").value = employee.birthDate;
      document.getElementById("gender").value = employee.gender;
      document.getElementById("address").value = employee.address;
      document.getElementById("phone").value = employee.phone;
      document.getElementById("departmentId").value = employee.departmentId;

      // Xử lý sự kiện khi người dùng bấm "Lưu thay đổi"
      document
        .getElementById("editEmployeeForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          // Cập nhật dữ liệu nhân viên
          employees[index] = {
            employeeId: document.getElementById("employeeId").value,
            employeeName: document.getElementById("employeeName").value,
            birthDate: document.getElementById("birthDate").value,
            gender: document.getElementById("gender").value,
            address: document.getElementById("address").value,
            phone: document.getElementById("phone").value,
            departmentId: document.getElementById("departmentId").value,
          };

          // Lưu vào localStorage
          localStorage.setItem("employees", JSON.stringify(employees));

          // Thông báo và quay về trang danh sách
          alert("Cập nhật thành công!");
          window.location.href = "quan-ly-nhan-vien.html";
        });
    </script>
  </body>
</html>
